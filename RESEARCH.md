##Answering example##
TL;DR
–ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å **`fm_transmitter`** (C/C++ –ø—Ä–æ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç Raspberry Pi –≤ FM-–ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫) –Ω–∞ **Swift** –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ **–Ω–∞ Raspberry Pi** –≤–ø–æ–ª–Ω–µ *–≤–æ–∑–º–æ–∂–Ω–æ*, –Ω–æ —ç—Ç–æ –Ω–µ–ª—ë–≥–∫–∞—è –∑–∞–¥–∞—á–∞, —Ç—Ä–µ–±—É—é—â–∞—è –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–∞–∫ —Å–∞–º–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ç–∞–∫ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π Swift –Ω–∞ Linux-ARM + –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏.

---

### –ü–æ—á–µ–º—É —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

–ü—Ä–æ–µ–∫—Ç –Ω–∞ GitHub –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ **C/C++** –∏ –Ω–∞–ø—Ä—è–º—É—é —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º–∏ –≤–µ—â–∞–º–∏ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è FM-—Å–∏–≥–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ GPIO –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DMA, –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ Raspberry Pi –∏ —Ç.–ø.) ‚Äî —ç—Ç–æ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏. ([GitHub][1])

Swift, —Ö–æ—Ç—å –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ—â–Ω—ã–π —è–∑—ã–∫, –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –¥–æ—Å—Ç—É–ø –∫ –∂–µ–ª–µ–∑—É —Ç—Ä–µ–±—É–µ—Ç:

* –ø—Ä—è–º–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å **–ø–∞–º—è—Ç—å—é, —Ä–µ–≥–∏—Å—Ç—Ä–∞–º–∏ –∏ DMA**,
* –≤—ã–∑–æ–≤–æ–≤ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö API (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ `mmap`, `ioctl` –∏ –ø—Ä. –≤ Linux),
* –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –º–∞–ª–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏.

–í—Å–µ —ç—Ç–æ –≤ C –¥–µ–ª–∞–µ—Ç—Å—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –∞ –≤ Swift ‚Äî –≤–æ–∑–º–æ–∂–Ω—ã–º–∏ –æ–±—ë—Ä—Ç–∫–∞–º–∏, –Ω–æ —Å —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏.

---

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–∏

**1. –ù–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ –≤ Swift**
–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ —á–∞—Å—ã Raspberry Pi (GPCLK) –¥–ª—è –º–æ–¥—É–ª—è—Ü–∏–∏ —Å–∏–≥–Ω–∞–ª–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DMA. Swift –Ω–µ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è —Ç–∞–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π ‚Äî –ø—Ä–∏–¥—ë—Ç—Å—è –ª–∏–±–æ:

* –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **C –æ–±—ë—Ä—Ç–∫–∏** (—á–µ—Ä–µ–∑ `import` C-—Ñ—É–Ω–∫—Ü–∏–π),
* –ª–∏–±–æ –≤—Ä—É—á–Ω—É—é –¥–µ–ª–∞—Ç—å `syscall`-–≤—ã–∑–æ–≤—ã –∏ `mmap` –ø–∞–º—è—Ç–∏,
* –ª–∏–±–æ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—å –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ `unsafe`-–±–ª–æ–∫–∏.

–≠—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞–Ω–∏–π Linux ABI, —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ Raspberry Pi –∏ Swift FFI.

---

**2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∑–∞–¥–µ—Ä–∂–∫–∏**
FM-–ø–µ—Ä–µ–¥–∞—á–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞ –∫ —Ç–∞–π–º–∏–Ω–≥–∞–º. C/C++ –∫–æ–¥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω, –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–∏ –∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã. Swift –æ–±–ª–∞–¥–∞–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º —É—Ä–æ–≤–Ω–µ–º –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –∏ —Ö–æ—Ç—è LLVM-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –∫–æ–¥, –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–π –∂–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±—É–¥–µ—Ç —Å–ª–æ–∂–Ω–æ. –î–ª—è FM-—Å–∏–≥–Ω–∞–ª–∞ —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ.

---

**3. –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Swift –Ω–∞ ARM Linux**
Swift –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Linux –Ω–∞ ARM (–≤ —Ç–æ–º —á–∏—Å–ª–µ Raspberry Pi), –Ω–æ:

* –∫–æ–º–ø–∏–ª—è—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ toolchain Swift –Ω–∞ Raspberry (–∏–ª–∏ –∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª—è—Ü–∏—è),
* –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–±–æ—Ä–∫—É –≤–∏–¥–∞ `swift build` –∏–ª–∏ –ø–æ–¥–æ–±–Ω—É—é,
* Swift –Ω–∞ Raspberry –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º C.

–≠—Ç–æ –Ω–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –æ–ø—ã—Ç–∞ —Ä–∞–±–æ—Ç—ã —Å–æ Swift on Linux.

---

### –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–í–∞—Ä–∏–∞–Ω—Ç A ‚Äî ‚Äú–æ–±—ë—Ä—Ç–∫–∞ –≤–æ–∫—Ä—É–≥ C-–∫–æ–¥–∞‚Äù**
–û—Å—Ç–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–π –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∫–æ–¥ (GPIO/DMA) –Ω–∞ C/C++, –∞ –æ—Å—Ç–∞–ª—å–Ω–æ–µ (–ª–æ–≥–∏–∫–∞, CLI, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å) –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –Ω–∞ Swift. –≠—Ç–æ —Å–∞–º–∞—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:

* Swift –≤—ã–∑—ã–≤–∞–µ—Ç C-—Ñ—É–Ω–∫—Ü–∏–∏ —á–µ—Ä–µ–∑ bridging headers,
* –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω–æ–≥–æ –∫–æ–¥–∞,
* –æ—Å–Ω–æ–≤–Ω–æ–π Swift –∫–æ–¥ –æ—Å—Ç–∞—ë—Ç—Å—è —á–∏—Ç–∞–µ–º—ã–º.

–≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ —Ç—Ä–µ–±—É–µ—Ç –º–µ–Ω—å—à–µ —É—Å–∏–ª–∏–π, —á–µ–º –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞.

---

**–í–∞—Ä–∏–∞–Ω—Ç B ‚Äî –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –Ω–∞ Swift**
–í —Ç–µ–æ—Ä–∏–∏ –≤–æ–∑–º–æ–∂–Ω–∞, –Ω–æ –≤ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–æ **–æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ** –∏ –ø–æ—á—Ç–∏ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –ø—Ä–∏–¥—ë—Ç—Å—è:

* –≤—Ä—É—á–Ω—É—é –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ GPIO/DMA —á–µ—Ä–µ–∑ unsafe-—Å–µ–∫—Ü–∏–∏,
* –∏–º–µ—Ç—å –≥–ª—É–±–æ–∫–∏–µ –∑–Ω–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã Raspberry Pi (Broadcom SoC –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è),
* –¥–æ–ø–∏—Å—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∏–¥–∏–æ–º–∞—Ç–∏—á–µ–Ω Swift.

---

### –†–µ–∞–ª—å–Ω—ã–µ —É—Å–∏–ª–∏—è –¥–ª—è Senior —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

–û—Ü–µ–Ω–æ—á–Ω–æ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –µ—Å–ª–∏ —Ç—ã:

* –∑–Ω–∞–∫–æ–º —Å Swift –Ω–∞ Linux,
* –ø–æ–Ω–∏–º–∞–µ—à—å —Ä–∞–±–æ—Ç—É Swift FFI —Å C,
* –≥–æ—Ç–æ–≤ ‚Äú–∫–æ–ø–∞—Ç—å‚Äù —è–¥—Ä–æ Linux, –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã, DMA –∏ GPIO,

—Ç–æ –ø—Ä–æ–µ–∫—Ç –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ –≤ —Ç–∞–∫–∏—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–∞–º–∫–∞—Ö:

* **–æ–±—ë—Ä—Ç–∫–∞ + Swift –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –Ω–µ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç—ã —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
* **–ø–æ–ª–Ω–∞—è –ø–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:** –º–µ—Å—è—Ü—ã, –≤–∫–ª—é—á–∞—è –æ—Ç–ª–∞–¥–∫—É –Ω–∞ –∂–µ–ª–µ–∑–µ.

–ü–ª—é—Å: –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Swift –∫–æ–¥ –ø–æ—á—Ç–∏ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –±—É–¥–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π —É—Ä–æ–≤–Ω—è C –¥–ª—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö —É—á–∞—Å—Ç–∫–æ–≤.

---

### –ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å

–ï—Å–ª–∏ —Ü–µ–ª—å ‚Äî *–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å FM-—Ç—Ä–∞–Ω—Å–º–∏—Ç—Ç–µ—Ä –∏–∑ Swift*, —Å–∞–º—ã–π –ª–æ–≥–∏—á–Ω—ã–π –ø—É—Ç—å:

1. —Å–æ–±—Ä–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π `fm_transmitter` C-–±–∏–Ω–∞—Ä –Ω–∞ Raspberry Pi,
2. –≤—ã–∑–≤–∞—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ Swift (`Process` / `exec`), –ø–µ—Ä–µ–¥–∞–≤–∞—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã,
3. –∏–ª–∏ –æ–±–µ—Ä–Ω—É—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∏ –≤—ã–∑—ã–≤–∞—Ç—å –µ—ë –∏–∑ Swift.

–≠—Ç–æ –¥–∞—Å—Ç —Ä–∞–±–æ—á–µ–µ —Ä–µ—à–µ–Ω–∏–µ –±–µ–∑ –ø–æ–ª–Ω–æ–π –ø–µ—Ä–µ–ø–∏—Å–∫–∏.

---

–ï—Å–ª–∏ —Ö–æ—á–µ—Ç—Å—è —É–≥–ª—É–±–∏—Ç—å—Å—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ toolchain Swift –Ω–∞ Raspberry –∏–ª–∏ –∫–∞–∫ –ø–∏—Å–∞—Ç—å C-–æ–±—ë—Ä—Ç–∫–∏ –¥–ª—è GPIO/DMA –≤ Swift), –º–æ–≥—É —Ä–∞—Å–ø–∏—Å–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω.

[1]: https://github.com/markondej/fm_transmitter "GitHub - markondej/fm_transmitter: Raspberry Pi as FM transmitter"

---

–ê –º–æ–∂–Ω–æ —Ç–æ–≥–¥–∞ —Å–¥–µ–ª–∞—Ç—å SPM –ø–∞–∫–µ—Ç –Ω–∞ Swift 5.9 –∏ —Ç—É–¥–∞ —ç—Ç—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∑–∞–≤–µ—Ä–Ω—É—Ç—å –∏ –≤ –∏—Ç–æ–≥–µ –≤—ã–∑—ã–≤–∞—Ç—å Swift –ø—Ä–æ–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É?
---


–°–¥–µ–ª–∞—é –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π –ø–ª–∞–Ω –∏ –¥–∞–º –ø–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä SPM-–ø–∞–∫–µ—Ç–∞: –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞ Swift 5.9 + C-target, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞–µ—Ç/–ª–∏–Ω–∫—É–µ—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ `fm_transmitter`, –∏ Swift API, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –ø–µ—Ä–µ–¥–∞—á—É. –ü–æ–∫–∞–∂—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É, Package.swift –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π CLI.


##Answering example##
**TL;DR**
–î–∞, –º–æ–∂–Ω–æ: –¥–µ–ª–∞–µ–º **SPM-–ø–∞–∫–µ—Ç (Swift 5.9)**, –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è **C++ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ `fm_transmitter`**, –∞ Swift –≤—ã–∑—ã–≤–∞–µ—Ç **C-shim** (`extern "C"`) ‚Üí –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥. –≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–π –ø—É—Ç—å ‚ÄúSwift —Å–Ω–∞—Ä—É–∂–∏, C++ –≤–Ω—É—Ç—Ä–∏‚Äù. ([GitHub][1])

---

### –®–∞–≥ 1. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –º—ã ‚Äú–∑–∞–≤–æ—Ä–∞—á–∏–≤–∞–µ–º‚Äù

–£ `markondej/fm_transmitter` ‚Äî –Ω–∞–±–æ—Ä `.cpp/.hpp` + `makefile`, –∫–æ—Ç–æ—Ä—ã–π –ª–∏–Ω–∫–æ–≤–∏—Ç—Å—è —Å **`-lbcm_host -lpthread -lm`** –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç include/lib –∏–∑ **`/opt/vc`**. ([GitHub][2])

SPM —É–º–µ–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å C/C++ —á–µ—Ä–µ–∑ clang, –ø–æ—ç—Ç–æ–º—É —Å—Ö–µ–º–∞ —Ç–∞–∫–∞—è:

* **Target `FMTransmitterCLib` (C++):** –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ —Ä–µ–ø–æ + –¥–æ–±–∞–≤–ª—è–µ–º –æ–¥–∏–Ω —Ñ–∞–π–ª `shim.cpp`.
* **Target `FMTransmitter` (Swift):** —Ç–æ–Ω–∫–∞—è Swift-–æ–±—ë—Ä—Ç–∫–∞ –≤–æ–∫—Ä—É–≥ `fm_transmitter_run(...)`.
* (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) **Executable `fm-swift`**: CLI –Ω–∞ Swift, —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å `sudo .build/release/fm-swift ...`.

---

### –®–∞–≥ 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–±–µ–∑ –º–∞–≥–∏–∏)

–°–æ–∑–¥–∞–π –ø–∞–∫–µ—Ç:

```bash
mkdir FMTransmitterSPM
cd FMTransmitterSPM
swift package init --type executable
```

–°–¥–µ–ª–∞–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤–æ—Ç —Ç–∞–∫ (—Ñ–∞–π–ª—ã ‚Äî –Ω–∏–∂–µ, –ø–æ–ª–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º):

```
FMTransmitterSPM/
  Package.swift
  Sources/
    FMTransmitterCLib/
      include/
        fm_transmitter_shim.h
      shim.cpp
      mailbox.cpp
      mailbox.hpp
      transmitter.cpp
      transmitter.hpp
      wave_reader.cpp
      wave_reader.hpp
      fm_transmitter.cpp
    FMTransmitter/
      FMTransmitter.swift
    fm-swift/
      main.swift
```

> –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ `mailbox/transmitter/wave_reader/fm_transmitter.cpp` –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è `markondej/fm_transmitter`. ([GitHub][1])

---

### –®–∞–≥ 3. `Package.swift` (–≥–æ—Ç–æ–≤—ã–π)

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏ `Package.swift` –Ω–∞ —ç—Ç–æ:

```swift
// swift-tools-version: 5.9
import PackageDescription

let package = Package(
    name: "FMTransmitterSPM",
    platforms: [
        // –ù–∞ Raspberry Pi —ç—Ç–æ Linux; platforms –º–æ–∂–Ω–æ –Ω–µ –∑–∞–¥–∞–≤–∞—Ç—å, –Ω–æ –ø—É—Å—Ç—å –±—É–¥–µ—Ç —è–≤–Ω–æ.
    ],
    products: [
        .library(name: "FMTransmitter", targets: ["FMTransmitter"]),
        .executable(name: "fm-swift", targets: ["fm-swift"]),
    ],
    targets: [
        .target(
            name: "FMTransmitterCLib",
            path: "Sources/FMTransmitterCLib",
            publicHeadersPath: "include",
            cxxSettings: [
                // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ makefile: -std=c++11, -O3, -Wall, include –¥–ª—è Broadcom
                .unsafeFlags(["-std=c++11", "-O3", "-Wall"]),
                .unsafeFlags(["-I/opt/vc/include"]),
                // –ß—Ç–æ–±—ã –ø—Ä–æ—Ç–∞—â–∏—Ç—å –≤–µ—Ä—Å–∏—é/–∏–º—è –∫–∞–∫ –≤ makefile (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –Ω–æ –ø—Ä–∏—è—Ç–Ω–æ)
                .define("VERSION", to: "\"0.9.6\""),
                .define("EXECUTABLE", to: "\"fm_transmitter\""),
            ],
            linkerSettings: [
                // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ makefile: -L/opt/vc/lib -lm -lpthread -lbcm_host
                .unsafeFlags(["-L/opt/vc/lib"]),
                .linkedLibrary("m"),
                .linkedLibrary("pthread"),
                .linkedLibrary("bcm_host"),
            ]
        ),
        .target(
            name: "FMTransmitter",
            dependencies: ["FMTransmitterCLib"],
            path: "Sources/FMTransmitter"
        ),
        .executableTarget(
            name: "fm-swift",
            dependencies: ["FMTransmitter"],
            path: "Sources/fm-swift"
        )
    ]
)
```

–ü–æ—á–µ–º—É —Ç—É—Ç `unsafeFlags`: –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Ñ–ª–∞–≥–∏ –ª–∏–Ω–∫–æ–≤–∫–∏/–∏–Ω–∫–ª—é–¥–æ–≤ –∏–∑ `makefile` (`/opt/vc/...`), –∞ SPM –∏–Ω–∞—á–µ –∏—Ö –Ω–µ —É–≥–∞–¥–∞–µ—Ç. ([GitHub][2])

---

### –®–∞–≥ 4. C-shim (–∫–ª—é—á–µ–≤–æ–π —Ç—Ä—é–∫)

#### `Sources/FMTransmitterCLib/include/fm_transmitter_shim.h`

```c
#pragma once

#ifdef __cplusplus
extern "C" {
#endif

// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–∞–∫ –æ–±—ã—á–Ω—ã–π main()
int fm_transmitter_run(int argc, const char* argv[]);

#ifdef __cplusplus
} // extern "C"
#endif
```

#### `Sources/FMTransmitterCLib/shim.cpp`

```cpp
#include <vector>
#include <cstring>

// –ü–æ–¥–∫–ª—é—á–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–ª—è Swift
#include "fm_transmitter_shim.h"

// –í–ê–ñ–ù–û: fm_transmitter.cpp –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç main(...).
// –ú—ã –Ω–µ —Ö–æ—Ç–∏–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å main –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞,
// –ø–æ—ç—Ç–æ–º—É "–ø–µ—Ä–µ–∏–º–µ–Ω—É–µ–º" main –≤ fm_transmitter_main –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
// –∏ –∑–∞–∏–Ω–∫–ª—é–¥–∏–º –∏—Å—Ö–æ–¥–Ω–∏–∫.
#define main fm_transmitter_main
#include "fm_transmitter.cpp"
#undef main

int fm_transmitter_run(int argc, const char* argv[]) {
    // fm_transmitter_main –æ–∂–∏–¥–∞–µ—Ç (int, char**), –ø–æ—ç—Ç–æ–º—É —Å–æ–±–∏—Ä–∞–µ–º mutable argv
    std::vector<char*> args;
    args.reserve(static_cast<size_t>(argc) + 1);

    for (int i = 0; i < argc; i++) {
        if (argv[i] == nullptr) {
            args.push_back(nullptr);
            continue;
        }
        size_t n = std::strlen(argv[i]);
        char* s = new char[n + 1];
        std::memcpy(s, argv[i], n + 1);
        args.push_back(s);
    }
    args.push_back(nullptr);

    int rc = fm_transmitter_main(argc, args.data());

    for (char* s : args) {
        delete[] s;
    }
    return rc;
}
```

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç **–Ω–µ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å** –ª–æ–≥–∏–∫—É `fm_transmitter.cpp`, –∞ –≤—ã–∑—ã–≤–∞—Ç—å –µ—ë –∫–∞–∫ ‚Äú–ø–æ—á—Ç–∏ main‚Äù, –Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–ª—è Swift-–ø—Ä–æ—Ü–µ—Å—Å–∞.

---

### –®–∞–≥ 5. Swift-–æ–±—ë—Ä—Ç–∫–∞

#### `Sources/FMTransmitter/FMTransmitter.swift`

```swift
import Foundation
import FMTransmitterCLib

public enum FMTransmitterError: Error, CustomStringConvertible {
    case nonZeroExit(code: Int32)

    public var description: String {
        switch self {
        case .nonZeroExit(let code):
            return "fm_transmitter –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –∫–æ–¥–æ–º \(code)"
        }
    }
}

public struct FMTransmitter {
    public init() {}

    /// args –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ä–æ–≤–Ω–æ –∫–∞–∫ —É –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –±–∏–Ω–∞—Ä—è:
    /// –Ω–∞–ø—Ä–∏–º–µ—Ä: ["-f", "100.6", "acoustic_guitar_duet.wav"]
    /// –∏–ª–∏ ["-f", "100.6", "-"] —á—Ç–æ–±—ã —á–∏—Ç–∞—Ç—å WAV –∏–∑ stdin
    public func run(_ args: [String]) throws {
        // argv[0] –ø–æ —Ç—Ä–∞–¥–∏—Ü–∏–∏ –∏–º—è –ø—Ä–æ—Ü–µ—Å—Å–∞
        let full = ["fm_transmitter"] + args

        let code: Int32 = full.withCStringArray { cArray in
            fm_transmitter_run(Int32(full.count), cArray)
        }

        if code != 0 {
            throw FMTransmitterError.nonZeroExit(code: code)
        }
    }
}

private extension Array where Element == String {
    func withCStringArray<R>(_ body: ([UnsafePointer<CChar>?]) -> R) -> R {
        let cStrings = self.map { strdup($0) }
        defer { cStrings.forEach { free($0) } }

        let cArray: [UnsafePointer<CChar>?] = cStrings.map { UnsafePointer($0) } + [nil]
        return body(cArray)
    }
}
```

---

### –®–∞–≥ 6. Swift CLI (—á—Ç–æ–±—ã –±—ã–ª–æ —É–¥–æ–±–Ω–æ –≥–æ–Ω—è—Ç—å)

#### `Sources/fm-swift/main.swift`

```swift
import Foundation
import FMTransmitter

// –ü—Ä–∏–º–µ—Ä:
// sudo .build/release/fm-swift -f 100.6 acoustic_guitar_duet.wav
// sudo .build/release/fm-swift -f 100.6 -   (–µ—Å–ª–∏ –ø–æ–¥–∞—ë—à—å WAV –≤ stdin)

do {
    var args = CommandLine.arguments
    _ = args.removeFirst() // –∏–º—è –ø—Ä–æ—Ü–µ—Å—Å–∞
    try FMTransmitter().run(args)
} catch {
    fputs("–û—à–∏–±–∫–∞: \(error)\n", stderr)
    exit(1)
}
```

---

### –®–∞–≥ 7. –°–±–æ—Ä–∫–∞ –Ω–∞ Raspberry Pi

–ü–æ README –ø—Ä–æ–µ–∫—Ç–∞, –Ω—É–∂–Ω—ã build tools, –∞ –∏–Ω–æ–≥–¥–∞ Broadcom libs (`libraspberrypi-dev`). ([GitHub][1])

```bash
sudo apt-get update
sudo apt-get install -y build-essential make libraspberrypi-dev
```

–î–∞–ª—å—à–µ:

```bash
swift build -c release
sudo .build/release/fm-swift -f 100.6 Sources/FMTransmitterCLib/acoustic_guitar_duet.wav
```

–ê–Ω—Ç–µ–Ω–Ω–∞ ‚Äî –ø—Ä–æ–≤–æ–¥ 20‚Äì40 —Å–º –Ω–∞ GPIO (–≤ README: GPIO4 / PIN 7; –¥–ª—è RPi4 –∏–Ω–æ–≥–¥–∞ —Å–æ–≤–µ—Ç—É—é—Ç GPIO21 –∏ —á–∞—Å—Ç–æ—Ç—ã –Ω–∏–∂–µ 93 –ú–ì—Ü). ([GitHub][1])

---

### –í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã (—á—Ç–æ–±—ã –Ω–µ –ø–æ–π–º–∞—Ç—å ‚Äú–ø–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç‚Äù)

1. **–ù—É–∂–µ–Ω `sudo`** ‚Äî —Ç–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –æ–±—ã—á–Ω–æ –ª–µ–∑—É—Ç –≤ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞/–ø–∞–º—è—Ç—å. –í README –∑–∞–ø—É—Å–∫ —Ç–æ–∂–µ —á–µ—Ä–µ–∑ `sudo`. ([GitHub][1])
2. **RPi 4 –∫–∞–ø—Ä–∏–∑–Ω—ã–π –ø–æ —á–∞—Å—Ç–æ—Ç–∞–º**: –∞–≤—Ç–æ—Ä –ø—Ä—è–º–æ –ø–∏—à–µ—Ç, —á—Ç–æ –º–æ–∂–µ—Ç –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö FM-—á–∞—Å—Ç–æ—Ç–∞—Ö; —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç GPIO21-—Å–±–æ—Ä–∫—É –∏ —á–∞—Å—Ç–æ—Ç—ã –Ω–∏–∂–µ 93 MHz + –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ governor. ([GitHub][1])
3. **–õ–∏–Ω–∫–æ–≤–∫–∞ —Å `/opt/vc`**: –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–≤–µ–∂–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –ø—É—Ç–∏ –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è. –ï—Å–ª–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ —Ä—É–≥–Ω—ë—Ç—Å—è –Ω–∞ `bcm_host`/–∑–∞–≥–æ–ª–æ–≤–∫–∏ ‚Äî —ç—Ç–æ –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ —Ç–æ, —á—Ç–æ –Ω–µ—Ç `libraspberrypi-dev` –∏–ª–∏ –¥—Ä—É–≥–∏–µ –ø—É—Ç–∏.

---

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å ‚ÄúGPIO21=1‚Äù –∫–∞–∫ –æ–ø—Ü–∏—é –≤ SPM

–í `makefile` —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è `make GPIO21=1` (–æ–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç `-DGPIO21`). ([GitHub][2])
–í SPM –º–æ–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å —Ç–∞–∫:

```bash
swift build -c release -Xcc -DGPIO21 -Xcxx -DGPIO21
```

(–ò–Ω–æ–≥–¥–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–ª—å–∫–æ `-Xcxx`, –Ω–æ —è –±—ã –¥–∞–ª –æ–±–∞, —á—Ç–æ–±—ã clang —Ç–æ—á–Ω–æ –ø—Ä–æ–±—Ä–æ—Å–∏–ª define –≤ C++ –∫–æ–º–ø–∏–ª—è—Ü–∏—é.)

---

### –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∞—è —Ä–µ–º–∞—Ä–∫–∞ (—Å–∫—É—á–Ω–∞—è, –Ω–æ —Ä–µ–∞–ª—å–Ω–∞—è)

–í README –µ—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, —á—Ç–æ –≤–µ—â–∞–Ω–∏–µ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ. –î–µ—Ä–∂–∏ –º–æ—â–Ω–æ—Å—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π, –∏—Å–ø–æ–ª—å–∑—É–π —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ/–∫–æ—Ä–æ—Ç–∫—É—é –∞–Ω—Ç–µ–Ω–Ω—É, –∏ –ª—É—á—à–µ —É—Ö–æ–¥–∏ –≤ ‚Äú–æ—á–µ–Ω—å –ª–æ–∫–∞–ª—å–Ω–æ‚Äù. ([GitHub][1])

---

–ï—Å–ª–∏ —Ç–µ–±–µ –Ω–∞–¥–æ, —è –º–æ–≥—É —Å—Ä–∞–∑—É ‚Äú–∞–ø–≥—Ä–µ–π–¥–Ω—É—Ç—å‚Äù —ç—Ç–æ –≤ –±–æ–ª–µ–µ —É–¥–æ–±–Ω—ã–π Swift API (—Ç–∏–ø–∞ `start(frequencyMHz:bandwidthKHz:dmaChannel:loop:fileOrStdin:)`) –∏ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã –Ω–µ —Å—Ç—Ä–µ–ª—è—Ç—å —Å–µ–±–µ –≤ –Ω–æ–≥—É.

[1]: https://github.com/markondej/fm_transmitter "GitHub - markondej/fm_transmitter: Raspberry Pi as FM transmitter"
[2]: https://github.com/markondej/fm_transmitter/blob/master/makefile "fm_transmitter/makefile at master ¬∑ markondej/fm_transmitter ¬∑ GitHub"


---




–ü–æ–∫–∞ –Ω–µ–º–Ω–æ–≥–æ –≤ —Å—Ç–æ—Ä–æ–Ω—É –¥–∞–≤–∞–π –æ—Ç–æ–π–¥–µ–º. –í–æ—Ç –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, –º—ã –∫–æ–º–∞–Ω–¥–æ–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ–¥–∏–Ω wav —Ñ–∞–π–ª –∏ –æ–Ω —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –∞–Ω—Ç–µ–Ω–Ω—É.

–ê —á—Ç–æ –µ—Å–ª–∏ —è —Ö–æ—á—É –ø–ª–µ–π–ª–∏—Å—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å? –ö–∞–∫ —Ç–æ–≥–¥–∞ –±—ã—Ç—å? –ü–∏—Å–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å –ø–æ–¥—Ä—è–¥ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—é?


---


##Answering example##
**TL;DR**
–î–∞, –±–∞–∑–æ–≤—ã–π –∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å ‚Äî **–ø–ª–µ–π–ª–∏—Å—Ç = –ø–æ—Ç–æ–∫ WAV**, –∞ –Ω–µ ¬´–º–Ω–æ–≥–æ —Ä–∞–∑ –∑–∞–ø—É—Å–∫–∞—Ç—å `fm_transmitter` –ø–æ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—É¬ª. –°–∞–º—ã–π –Ω–∞–¥—ë–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: **–æ–¥–∏–Ω –∑–∞–ø—É—Å–∫ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞**, –∞ –∞—É–¥–∏–æ —Ç—ã –ø–æ–¥–∞—ë—à—å **—á–µ—Ä–µ–∑ stdin**, —Å–∫–ª–µ–∏–≤–∞—è WAV-—Ñ–∞–π–ª—ã –≤ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –ø–æ—Ç–æ–∫. –°–∫—Ä–∏–ø—Ç –∏–ª–∏ Swift-–∫–æ–¥ —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—å—é, –Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫ –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.

---

–¢–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä—ë–º—Å—è —Å–ø–æ–∫–æ–π–Ω–æ, –ø–æ –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏, –±–µ–∑ —Å—É–µ—Ç—ã.

## 1. –ü–æ—á–µ–º—É ¬´–ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å —Ñ–∞–π–ª—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å¬ª ‚Äî –ø–ª–æ—Ö–∞—è –∏–¥–µ—è

–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç:

```bash
fm_transmitter song1.wav
fm_transmitter song2.wav
fm_transmitter song3.wav
```

–≠—Ç–æ **—Ä–∞–±–æ—Ç–∞–µ—Ç**, –Ω–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –∫—Ä–∏–≤–æ:

* –∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫ ‚Üí –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ DMA, GPIO, PLL
* –ø–∞—É–∑—ã –º–µ–∂–¥—É —Ç—Ä–µ–∫–∞–º–∏
* —â–µ–ª—á–∫–∏, —Ä–∞–∑—Ä—ã–≤—ã –Ω–µ—Å—É—â–µ–π
* –≤—ã—à–µ —à–∞–Ω—Å –≥–ª—é–∫–æ–≤ –Ω–∞ RPi 4

FM-–ø–µ—Ä–µ–¥–∞—á–∞ –ª—é–±–∏—Ç **–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å**. –†–∞–¥–∏–æ ‚Äî —ç—Ç–æ –ø–æ—Ç–æ–∫, –∞ –Ω–µ –Ω–∞–±–æ—Ä —Ñ–∞–π–ª–æ–≤.

---

## 2. –ö–∞–∫ —ç—Ç–æ –∑–∞–¥—É–º–∞–Ω–æ –≤ `fm_transmitter`

–ö–ª—é—á–µ–≤–∞—è –¥–µ—Ç–∞–ª—å:
**`fm_transmitter` —É–º–µ–µ—Ç —á–∏—Ç–∞—Ç—å WAV –∏–∑ `stdin`**

–ü—Ä–∏–º–µ—Ä –∏–∑ README (–Ω–µ –∑—Ä—è –æ–Ω —Ç–∞–º –µ—Å—Ç—å):

```bash
cat file.wav | sudo fm_transmitter -f 100.6 -
```

`-` –æ–∑–Ω–∞—á–∞–µ—Ç: *—á–∏—Ç–∞–π –∏–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –≤–≤–æ–¥–∞*.

üí° –≠—Ç–æ –∏ –µ—Å—Ç—å —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –ø–ª–µ–π–ª–∏—Å—Ç–∞.

---

## 3. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: ¬´–æ–¥–∏–Ω –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫, –º–Ω–æ–≥–æ –∞—É–¥–∏–æ¬ª

–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å —Ç–∞–∫–∞—è:

```
[ playlist manager ] ‚Üí [ PCM stream ] ‚Üí stdin ‚Üí fm_transmitter ‚Üí FM
```

–ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫:

* –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑**
* –¥—É–º–∞–µ—Ç, —á—Ç–æ –∏–≥—Ä–∞–µ—Ç ¬´–±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π WAV¬ª

–¢—ã:

* –ø–æ–¥–∞—ë—à—å —Ç—É–¥–∞ –¥–∞–Ω–Ω—ã–µ
* —Ä–µ—à–∞–µ—à—å, —á—Ç–æ –∏ –∫–æ–≥–¥–∞ –∑–≤—É—á–∏—Ç

---

## 4. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π bash-–ø–ª–µ–π–ª–∏—Å—Ç (—á—Ç–æ–±—ã –ø—Ä–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –∏–¥–µ—é)

```bash
#!/bin/bash

FREQ=100.6

(
  cat intro.wav
  cat track1.wav
  cat track2.wav
  cat track3.wav
) | sudo fm_transmitter -f $FREQ -
```

–í–∞–∂–Ω–æ:

* **–≤—Å–µ WAV –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞**

  * sample rate (–æ–±—ã—á–Ω–æ 44100)
  * mono
  * 16-bit PCM

–ï—Å–ª–∏ —Ñ–æ—Ä–º–∞—Ç —Ä–∞–∑–Ω—ã–π ‚Äî –±—É–¥—É—Ç –∏—Å–∫–∞–∂–µ–Ω–∏—è –∏–ª–∏ —Ç–∏—à–∏–Ω–∞.

---

## 5. –ß—É—Ç—å —É–º–Ω–µ–µ: –ø–ª–µ–π–ª–∏—Å—Ç –≤ —Ü–∏–∫–ª–µ

```bash
#!/bin/bash

FREQ=100.6

while true; do
  for f in playlist/*.wav; do
    cat "$f"
  done
done | sudo fm_transmitter -f $FREQ -
```

–ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —É —Ç–µ–±—è **—Ä–∞–¥–∏–æ**, –∞ –Ω–µ ¬´–ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç–µ–ª—å¬ª.

---

## 6. –ê –µ—Å–ª–∏ —Ñ–∞–π–ª—ã —Ä–∞–∑–Ω—ã–µ? (—Ä–µ–∞–ª—å–Ω–∞—è –∂–∏–∑–Ω—å)

–í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏:

* —Ä–∞–∑–Ω—ã–µ sample rate
* stereo
* mp3, flac, —á—Ç–æ —É–≥–æ–¥–Ω–æ

–†–µ—à–µ–Ω–∏–µ ‚Äî **–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –≤ PCM** –ø–µ—Ä–µ–¥ –ø–æ–¥–∞—á–µ–π –≤ `fm_transmitter`.

–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π Unix-–ø–∞–π–ø–ª–∞–π–Ω:

```bash
ffmpeg -i input.mp3 -f wav -ac 1 -ar 44100 pipe:1
```

–ü–ª–µ–π–ª–∏—Å—Ç:

```bash
(
  ffmpeg -i song1.mp3 -f wav -ac 1 -ar 44100 pipe:1
  ffmpeg -i song2.flac -f wav -ac 1 -ar 44100 pipe:1
) | sudo fm_transmitter -f 100.6 -
```

`fm_transmitter` –≤–æ–æ–±—â–µ –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ —Ç–∞–º –±—ã–ª–∏ —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã.
–î–ª—è –Ω–µ–≥–æ —ç—Ç–æ **–æ–¥–∏–Ω –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π WAV-–ø–æ—Ç–æ–∫**.

---

## 7. –ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ Swift (–∏–¥–µ—è, –Ω–µ –∫–æ–¥ —Ä–∞–¥–∏ –∫–æ–¥–∞)

–¢—ã —É–∂–µ –º—ã—Å–ª–∏—à—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
Swift ‚Äî **–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä**, –∞ –Ω–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–∏–≥–Ω–∞–ª–∞.

–õ–æ–≥–∏–∫–∞ —Ç–∞–∫–∞—è:

1. Swift –∑–∞–ø—É—Å–∫–∞–µ—Ç `fm_transmitter -f 100.6 -`
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç `stdin` –ø—Ä–æ—Ü–µ—Å—Å–∞
3. –ü–æ –æ—á–µ—Ä–µ–¥–∏:

   * —á–∏—Ç–∞–µ—Ç WAV/PCM
   * –ø–∏—à–µ—Ç –±–∞–π—Ç—ã –≤ stdin
4. –ú–æ–∂–µ—Ç:

   * –¥–µ–ª–∞—Ç—å –∫—Ä–æ—Å—Å—Ñ–µ–π–¥—ã
   * –≤—Å—Ç–∞–≤–ª—è—Ç—å –¥–∂–∏–Ω–≥–ª—ã
   * —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—ã

–≠—Ç–æ —É–∂–µ **—Ä–∞–¥–∏–æ—Å—Ç–∞–Ω—Ü–∏—è**, –∞ –Ω–µ —É—Ç–∏–ª–∏—Ç–∞.

---

## 8. –ö—É–¥–∞ —ç—Ç–æ –ª–æ–≥–∏—á–Ω–æ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –¥–∞–ª—å—à–µ

–ë–µ–∑ —É—Å–ª–æ–∂–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã —Ç—ã –º–æ–∂–µ—à—å –ø–æ–ª—É—á–∏—Ç—å:

* üéµ –ø–ª–µ–π–ª–∏—Å—Ç
* üîÅ repeat / shuffle
* üéô –º–∏–∫—Ä–æ—Ñ–æ–Ω ‚Üí —ç—Ñ–∏—Ä
* üï∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (—É—Ç—Ä–æ ‚Äî –º—É–∑—ã–∫–∞, –≤–µ—á–µ—Ä ‚Äî –ø–æ–¥–∫–∞—Å—Ç)
* üì° –ª–æ–∫–∞–ª—å–Ω–æ–µ FM-—Ä–∞–¥–∏–æ ¬´–∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–µ–µ¬ª

–í—Å—ë —ç—Ç–æ ‚Äî **–Ω–µ –º–µ–Ω—è—è –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫**, —Ç–æ–ª—å–∫–æ —É–ø—Ä–∞–≤–ª—è—è –ø–æ—Ç–æ–∫–æ–º.

---

### –ö–æ—Ä–æ—Ç–∫–æ, –∫–∞–∫ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π –≤—ã–≤–æ–¥

* ‚ùå –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å `fm_transmitter` –Ω–∞ –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª ‚Äî –ø–ª–æ—Ö–∞—è –∏–¥–µ—è
* ‚úÖ –û–¥–∏–Ω –∑–∞–ø—É—Å–∫ + stdin = –ø—Ä–∞–≤–∏–ª—å–Ω–æ
* ‚úÖ –ü–ª–µ–π–ª–∏—Å—Ç = —Å–∫–ª–µ–µ–Ω–Ω—ã–π PCM-–ø–æ—Ç–æ–∫
* ‚úÖ Swift/—Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—á–µ—Ä–µ–¥—å—é, –∞ –Ω–µ —Ä–∞–¥–∏–æ—á–∞—Å—Ç–æ—Ç–æ–π

–°–ª–µ–¥—É—é—â–∏–π –ª–æ–≥–∏—á–Ω—ã–π —à–∞–≥ ‚Äî —Ä–∞–∑–æ–±—Ä–∞—Ç—å **–∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫–æ–π –ø–ª–µ–π–ª–∏—Å—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞ Swift** (–±–µ–∑ ffmpeg-shell, –∞ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ –ø–∞–π–ø–∞–º–∏).
